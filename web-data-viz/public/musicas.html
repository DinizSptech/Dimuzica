<!DOCTYPE html>
<script src="./main.js"></script>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dimuzica</title>
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="./assets/logo.ico" type="image/x-icon">
</head>
<body class="home" onload="carregarMusica()">
  <div class="header">
    <div class="inicio_header">
      <div class="header_button" onclick="local_estatistica()">
        <img src="./assets/stats.png"  alt="estatisticas">
        <div>Estatisticas</div>
      </div>
      <div  class="header_button" onclick="local_sobremim()">
        <img src="./assets/vinil.png" alt="vinil"> 
        <div>Sobre mim</div>
      </div>
      <div class="header_button" onclick="local_index()">
        <img src="./assets/home.png"  alt="estatisticas"> 
        <div>Início</div>
      </div>
    </div>
    <div class="linha"></div>
      <div class="botaolegal">
        <div class="login_button" onclick="local_login()">Login</div>
        <div class="cadastro_button" onclick="local_cadastro()">Cadastro</div>
      </div>
    </div>
    <div class="container">
      <div class="musicas_display">
        <div class="musicas_genero">
          <div>Músicas do genero <span id="genero_user"></span></div>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica1"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica2"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica3"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica4"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica5"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica6"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica7"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica8"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica9"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica10"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica11"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica12"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica13"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica14"></iframe>
          <iframe style="border-radius:12px" src="" width="80%" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy" id="musica15"></iframe>
        </div>
      </div>
    </div>
    </body>
    <script>
      genero_user.innerHTML = sessionStorage.GENERO_USUARIO;
      var musicas = []

      //  FOR DENTRO DE FOR PARA VALIDAR A MUSICA, UM FALA A DIV O OUTRO VERIFICA SE A MUSICA JA ESTA NA LISTA
      function carregarMusica(){
        fetch("/musica/musica-geral", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            }
          }).then(function (resposta) {
                resposta.json().then(json => {
                    console.log(json);
                    console.log(JSON.stringify(json));
                    
                    var musicas = []
                    for(var cont = 1; cont <= 15; cont++) {
                      var musica_aleatoria = Number(Math.floor(Math.random() * 54))
                      while(musicas.includes(musica_aleatoria)){
                        musica_aleatoria  = Number(Math.floor(Math.random() * 54))
                        console.log('Inclui')
                      }
                      musicas.push(musica_aleatoria)
                    document.getElementById(`musica${cont}`).src = json.musica_todas[musica_aleatoria].audio
                    }                    
                  });
                })
              }
    </script>